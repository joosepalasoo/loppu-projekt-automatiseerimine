<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Math Flashcards</title>
  <style>
    :root{
      --bg:#0f172a;
      --panel:#111827;
      --panel-2:#1f2937;
      --text:#e5e7eb;
      --muted:#9ca3af;
      --accent:#22c55e;
      --accent-2:#3b82f6;
      --wrong:#ef4444;
      --card:#0b1224;
      --shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui;
      background: radial-gradient(1200px 700px at 20% -10%, #1e293b, transparent),
                  radial-gradient(1200px 700px at 120% 10%, #111827, transparent),
                  var(--bg);
      color:var(--text);
      display:flex; align-items:center; justify-content:center;
      padding:24px;
    }
    .app{max-width:980px; width:100%;}
    .grid{display:grid; grid-template-columns: 1fr 340px; gap:20px}
    @media (max-width: 900px){ .grid{grid-template-columns:1fr} }

    .panel{background:linear-gradient(180deg, var(--panel), var(--panel-2)); border:1px solid #111827; border-radius:18px; box-shadow:var(--shadow);}
    .head{display:flex; align-items:center; justify-content:space-between; padding:18px 20px; border-bottom:1px solid #1f2937}
    .head h1{font-size:20px; margin:0; font-weight:700}
    .muted{color:var(--muted)}
    .controls{display:flex; gap:10px; align-items:center}
    button,.btn{
      background:var(--panel-2); color:var(--text); border:1px solid #374151; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600;
    }
    button:hover{border-color:#4b5563}
    .btn-accent{background:var(--accent-2); border-color:transparent}
    .btn-ghost{background:transparent}

    .workspace{display:grid; grid-template-rows:auto 1fr auto; min-height:520px}
    .cardwrap{display:flex; align-items:center; justify-content:center; padding:28px}
    .card{width:100%; max-width:540px; aspect-ratio: 5 / 3; background: radial-gradient(120% 100% at 120% -10%, #0b1327, #081022 45%, #070d1a); border:1px solid #0b1224; border-radius:22px; position:relative; perspective:1000px; box-shadow: 0 30px 60px rgba(0,0,0,.35)}
    .inner{position:absolute; inset:0; transition: transform .6s; transform-style:preserve-3d}
    .card.flipped .inner{transform: rotateY(180deg)}
    .face{position:absolute; inset:0; backface-visibility:hidden; display:flex; align-items:center; justify-content:center; padding:22px}
    .front .q{font-size:76px; font-weight:800; letter-spacing:2px}
    .back{transform: rotateY(180deg)}
    .ans{font-size:64px; font-weight:800; color:var(--accent)}
    .tag{position:absolute; top:12px; left:12px; font-size:12px; letter-spacing:.08em; background:#0a1222; border:1px solid #0f1b33; padding:6px 10px; border-radius:999px; color:#9fb6ff}

    .answer{display:flex; gap:10px; align-items:center; padding:0 28px 28px}
    .answer input{flex:1; background:#0b1224; color:var(--text); border:1px solid #1f2937; border-radius:12px; padding:14px 16px; font-size:18px}
    .answer input:focus{outline:2px solid #334155}
    .status{min-height:24px; font-weight:700}
    .ok{color:var(--accent)}
    .bad{color:var(--wrong)}

    .side{padding:16px}
    .box{background:#0b1224; border:1px solid #1f2937; border-radius:14px; padding:14px 14px; margin-bottom:14px}
    .box h3{margin:0 0 8px 0; font-size:14px; color:#cbd5e1; letter-spacing:.04em}

    .row{display:flex; gap:8px; flex-wrap:wrap}
    .chip input{display:none}
    .chip label{display:inline-block; padding:8px 10px; border:1px solid #334155; border-radius:999px; cursor:pointer; font-size:13px}
    .chip input:checked + label{background:#12213f; border-color:#3b82f6}

    .stats{display:grid; grid-template-columns:repeat(3,1fr); gap:8px}
    .stat{background:#0b1224; border:1px solid #1f2937; border-radius:14px; padding:12px}
    .stat .v{font-size:22px; font-weight:800}
    .footer{display:flex; justify-content:space-between; align-items:center; padding:14px 20px; border-top:1px solid #1f2937}
    .hint{font-size:12px; color:var(--muted)}

    .kbd{font-family: ui-monospace; border:1px solid #374151; background:#0b1224; border-radius:6px; padding:2px 6px; font-size:12px}
  </style>
</head>

<body>
  <main class="app">
    <div class="panel workspace">
      <div class="head">
        <h1>Math Flashcards</h1>
        <div class="controls">
          <button id="flipBtn">Flip</button>
          <button id="skipBtn" class="btn-ghost">Next</button>
          <button id="resetBtn" class="btn-ghost">Reset</button>
          <button id="speedBtn" class="btn-accent" aria-pressed="false">Start 60s</button>
        </div>
      </div>

      <div class="cardwrap">
        <div id="card" class="card">
          <div class="inner">
            <section class="face front">
              <div class="tag" id="opTag">—</div>
              <div class="q" id="question">2 + 2</div>
            </section>
            <section class="face back">
              <div class="tag">Answer</div>
              <div class="ans" id="answer">4</div>
            </section>
          </div>
        </div>
      </div>

      <div class="answer">
        <input id="answerInput" type="number" placeholder="Your answer…" autocomplete="off" />
        <button id="submitBtn" class="btn">Check</button>
      </div>

      <div class="footer">
        <div class="status" id="status"></div>
        <div class="hint">Shortcuts: <span class="kbd">Enter</span> check, <span class="kbd">Space</span> flip, <span class="kbd">N</span> next</div>
      </div>
    </div>

    <aside class="panel side">
      <div class="box">
        <h3>Operations</h3>
        <div class="row">
          <span class="chip"><input type="checkbox" id="opAdd" checked><label for="opAdd">+</label></span>
          <span class="chip"><input type="checkbox" id="opSub" checked><label for="opSub">−</label></span>
          <span class="chip"><input type="checkbox" id="opMul" checked><label for="opMul">×</label></span>
          <span class="chip"><input type="checkbox" id="opDiv" checked><label for="opDiv">÷</label></span>
        </div>
      </div>

      <div class="box">
        <h3>Difficulty</h3>
        <div class="row">
          <span class="chip"><input type="radio" name="diff" id="d1" value="10" checked><label for="d1">0–10</label></span>
          <span class="chip"><input type="radio" name="diff" id="d2" value="20"><label for="d2">0–20</label></span>
          <span class="chip"><input type="radio" name="diff" id="d3" value="100"><label for="d3">0–100</label></span>
        </div>
      </div>

      <div class="box">
        <h3>Answer style</h3>
        <div class="row">
          <span class="chip"><input type="radio" name="mode" id="modeType" value="type" checked><label for="modeType">Type answer</label></span>
          <span class="chip"><input type="radio" name="mode" id="modeFlip" value="flip"><label for="modeFlip">Flip to reveal</label></span>
        </div>
      </div>

      <div class="stats">
        <div class="stat"><div class="k muted">Correct</div><div class="v" id="sCorrect">0</div></div>
        <div class="stat"><div class="k muted">Wrong</div><div class="v" id="sWrong">0</div></div>
        <div class="stat"><div class="k muted">Accuracy</div><div class="v" id="sAcc">—</div></div>
        <div class="stat"><div class="k muted">Streak</div><div class="v" id="sStreak">0</div></div>
        <div class="stat"><div class="k muted">Total</div><div class="v" id="sTotal">0</div></div>
        <div class="stat"><div class="k muted">Timer</div><div class="v" id="sTimer">—</div></div>
      </div>

      <div class="box">
        <h3>Session</h3>
        <div class="row">
          <button id="newBtn">New card</button>
          <button id="replayBtn">Repeat</button>
          <button id="clearBtn">Clear</button>
        </div>
      </div>
    </aside>
  </main>

  <script>
    const $ = (s)=>document.querySelector(s);
    const $$ = (s)=>Array.from(document.querySelectorAll(s));

    const state = {
      a:0,b:0,op:'+',answer:0,
      last:null,
      correct:0, wrong:0, streak:0, total:0,
      timer:null, timeLeft:60, speed:false
    };

    function randInt(n){ return Math.floor(Math.random()*(n+1)); }
    function pickOp(){
      const ops=[];
      if($('#opAdd').checked) ops.push('+');
      if($('#opSub').checked) ops.push('−');
      if($('#opMul').checked) ops.push('×');
      if($('#opDiv').checked) ops.push('÷');
      if(!ops.length) return '+';
      return ops[Math.floor(Math.random()*ops.length)];
    }
    function getMax(){ return Number(document.querySelector('input[name="diff"]:checked').value); }
    function getMode(){ return document.querySelector('input[name="mode"]:checked').value; }

    function gen(){
      const max = getMax();
      const op = pickOp();
      let a=0,b=0,ans=0;
      if(op==='+') { a=randInt(max); b=randInt(max); ans=a+b; }
      else if(op==='−') { a=randInt(max); b=randInt(max); if(b>a) [a,b]=[b,a]; ans=a-b; }
      else if(op==='×') { a=randInt(Math.min(max,12)); b=randInt(Math.min(max,12)); ans=a*b; }
      else {
        b = randInt(Math.min(max,12)); if(b===0) b=1;
        const q = randInt(Math.min(max,12));
        ans = q; a = b*q;
      }
      state.a=a; state.b=b; state.op=op; state.answer=ans; state.last={a,b,op,ans};
      renderCard();
    }

    function renderCard(){
      $('#question').textContent = `${state.a} ${state.op} ${state.b}`;
      $('#answer').textContent = state.answer;
      $('#card').classList.remove('flipped');
      $('#status').textContent='';

      if(getMode()==='flip'){
        $('#answerInput').disabled=true;
        $('#submitBtn').disabled=true;
      } else {
        $('#answerInput').disabled=false;
        $('#submitBtn').disabled=false;
        $('#answerInput').value='';
        $('#answerInput').focus();
      }
    }

    function check(){
      if(getMode()==='flip'){ flip(); return; }
      const v = Number($('#answerInput').value);
      if(Number.isNaN(v)) return;
      if(v===state.answer){
        state.correct++; state.streak++; state.total++;
        $('#status').textContent='Correct'; $('#status').className='status ok';
      } else {
        state.wrong++; state.streak=0; state.total++;
        $('#status').textContent=`Wrong — correct is ${state.answer}`; $('#status').className='status bad';
      }
      updateStats();
      setTimeout(gen,400);
    }

    function updateStats(){
      $('#sCorrect').textContent=state.correct;
      $('#sWrong').textContent=state.wrong;
      $('#sStreak').textContent=state.streak;
      $('#sTotal').textContent=state.total;
      $('#sAcc').textContent = state.total? Math.round(state.correct/state.total*100)+'%' : '—';
    }

    function flip(){ $('#card').classList.toggle('flipped'); }
    function next(){ gen(); }
    function clearInput(){ $('#answerInput').value=''; $('#answerInput').focus(); }
    function resetStats(){ state.correct=0; state.wrong=0; state.streak=0; state.total=0; updateStats(); }

    function speed(){
      if(state.speed){
        clearInterval(state.timer); state.speed=false;
        $('#speedBtn').textContent='Start 60s';
        $('#sTimer').textContent='—';
        return;
      }
      state.timeLeft=60; state.speed=true;
      $('#speedBtn').textContent='Stop';
      $('#sTimer').textContent='60s';
      state.timer = setInterval(()=>{
        state.timeLeft--;
        $('#sTimer').textContent=state.timeLeft+'s';
        if(state.timeLeft<=0){
          clearInterval(state.timer);
          state.speed=false;
          $('#speedBtn').textContent='Start 60s';
        }
      },1000);
    }

    $('#submitBtn').addEventListener('click',check);
    $('#flipBtn').addEventListener('click',flip);
    $('#skipBtn').addEventListener('click',next);
    $('#resetBtn').addEventListener('click',resetStats);
    $('#clearBtn').addEventListener('click',clearInput);
    $('#newBtn').addEventListener('click',next);
    $('#replayBtn').addEventListener('click',()=>{ if(state.last){ state.a=state.last.a; state.b=state.last.b; state.op=state.last.op; state.answer=state.last.ans; renderCard(); }});
    $('#speedBtn').addEventListener('click',speed);

    $$('.chip input').forEach(el=>el.addEventListener('change',gen));
    $$('.chip input[name="mode"]').forEach(el=>el.addEventListener('change',renderCard));

    document.addEventListener('keydown',e=>{
      if(e.key==='Enter'){ e.preventDefault(); check(); }
      if(e.key===' '){ e.preventDefault(); flip(); }
      if(e.key.toLowerCase()==='n'){ e.preventDefault(); next(); }
    });

    gen();
  </script>
</body>
</html>
